extends layout

block content
  .page-header
    h2= title
    br

  .col-md-4

    form.form-horizontal(method='post', id='buyerform', onkeypress='return event.keyCode != 13;')
      input(type='hidden', name='_csrf', value=_csrf)
      input(type='hidden', name='_method', value=method)

      .row
        .board
          .board-inner

            ul#tabgroup1.nav.nav-tabs
              .liner
              li#tabInformationPanel.active
                a(href='#tabInformation', data-toggle='tab', title='Contract Address')
                  span.round-tabs.one
                    i.glyphicon.glyphicon-home
              li#tabdditionalPanel
                a(href='#tabAdditional', data-toggle='tab', title='Additional Information')
                  span.round-tabs.two
                    i.glyphicon.glyphicon-plus

              li(style='float:right;')
                button.btn.btn-primary(name='buyer_submit', type='submit')
                    i.fa.fa-hand-pointer-o
                    | Save Buyer Record

            .tab-content
              #tabInformation.tab-pane.fade.active.in
                .form-row.col-sm-12
                    br
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_clientIDs') Clients [search by first/last name or city]
                    input#buyer_clientIDs.flexdatalist(type='text', 
                                                      name='buyer_clientIDs',
                                                      multiple='true', 
                                                      data-data='clients.json', 
                                                      data-search-in='["client_firstname","client_lastname", "client_city"]', 
                                                      data-visible-properties='["client_firstname", "client_lastname", "client_city"]', 
                                                      data-selection-required='true', 
                                                      data-value-property='_id', 
                                                      data-text-property='{client_firstname} {client_lastname} - {client_city}', 
                                                      data-min-length='1', 
                                                      data-remove-on-backspace='false',
                                                      data-focus-first-result='true')
                                                      //- style='width: 100%; border: 0px !important;'
                .form-row.col-sm-12
                    br
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_address') Address
                    input#buyer_address.form-control(name='buyer_address', type='text', required='required', placeholder='123 Sample Street, Unit B', value=buyer.buyer_address)
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_city') City
                    input#buyer_city.form-control(name='buyer_city', type='text', required='required', value=buyer.buyer_city)
                .form-row
                  .col-sm-8
                    label.lb-sm.control-label(for='buyer_state') State
                    select#buyer_state.selectpicker.form-control(name='buyer_state', type='select', required='required', title='Select', data-live-search='true', data-dropup-auto='false', data-size='3')
                      option(value='' selected=!buyer.buyer_state) Select
                       for state in states
                        option(value=state.option selected=state.option === buyer.buyer_state) #{state.value}
                  .col-sm-4
                    label.lb-sm(for='buyer_zip') ZIP Code
                    input#buyer_zip.form-control(name='buyer_zip', type='text', required='required', value=buyer.buyer_zip)
                .form-row.col-sm-12
                    br
                .form-row
                  .col-sm-6
                    label.lb-sm(for='buyer_contractdate') Contract Date
                    input#buyer_contractdate.form-control(name='buyer_contractdate', type='date')
                  .col-sm-6
                    label.lb-sm(for='buyer_closingdate') Closing Date
                    input#buyer_closingdate.form-control(name='buyer_closingdate', type='date')
                .form-row.col-sm-12
                    br
                .form-row
                  .col-sm-12
                    input#buyer_notifications(name='buyer_notifications', type='checkbox')
                    |  Send deadline notifications to me. (agent only)

              #tabAdditional.tab-pane.fade
                .form-row.col-sm-12
                    br
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_purchaseprice') Purchase Price
                    .input-group.mb-2.mr-sm-2.mb-sm-0
                      .input-group-addon $
                      input#buyer_purchaseprice.form-control.currency(name='buyer_purchaseprice', type='text')
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_earnestprice') Earnest Money
                    .input-group.mb-2.mr-sm-2.mb-sm-0
                      .input-group-addon $
                      input#buyer_earnestprice.form-control.currency(name='buyer_earnestprice', type='text')
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_concession') Buyer Concession (seller?)
                    .input-group.mb-2.mr-sm-2.mb-sm-0
                      .input-group-addon $
                      input#buyer_concession.form-control.currency(name='buyer_concession', type='text')
                .row
                  .col-sm-12
                    p &nbsp;

                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_titlecompany') Title Company
                    select#buyer_titlecompany.form-control(name='buyer_titlecompany')
                      //option(hidden='true') 
                      option(value=1) Other Title Company
                      option(value=2) Land Title Company
                      option(value=3) Abstract Title Company
                      option(value=4) Advanced Title Company
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_mortgagelender') Mortgage Lender
                    select#buyer_titlecompany.form-control(name='buyer_mortgagelender')
                      //option(hidden='true') 
                      option(value=1) Other Mortgage Lender
                      option(value=2) Land Title Company
                      option(value=3) Abstract Title Company
                      option(value=4) Advanced Title Company
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_sellingagent') Selling Agent
                    select#buyer_sellingagent.form-control(name='buyer_sellingagent')
                      //option(hidden='true') 
                      option(value=1) Dave Kimbrough
                      option(value=2) Marky Mark
                .form-row
                  .col-sm-12
                    label.lb-sm(for='buyer_salestype') Sales Type
                    select#buyer_salestype.form-control(name='buyer_salestype')
                      //option(hidden='true')
                      // DEFAULT TO N/A 
                      option(value='N/A') N/A
                      option(value='HUD') HUD
                      option(value='REO') REO
                      option(value='SHORT') SHORT SALE

                //- Alternative Earnest Money Deadline

                //- Title
                //-   Record Title Deadline
                //-   Record Title Objection Deadline
                //-   Off-Record Title Deadline
                //-   Off-Record Title Objection Deadline
                //-   Title Resolution Deadline
                //-   Right of First Refusal Deadline

                //- Owners' Association
                //-   Association Documents Deadline
                //-   Association Documents Objection Deadline

                //- Seller's Property Disclosure
                //-   Seller's Property Disclosure Deadline

                //- Loan
                //-   Loan Application Deadline
                //-   Loan Objection Deadline

                //- Appraisal
                //-   Appraisal Deadline
                //-   Appraisal Objection Deadline
                //-   Appraisal Resolution Deadline

                //- Survey
                //-   New ILC or New Survey Deadline
                //-   New ILC or New Survey Objection Deadline
                //-   New ILC or New Survey Resolution Deadline

                //- Inspection and Due Diligence
                //-   Inspection Objection Deadline
                //-   Inspection Resolution Deadline
                //-   Property Insurance Objection Deadline
                //-   Due Diligence Documents Delivery Deadline
                //-   Due Diligence Documents Objection Deadline
                //-   Due Diligence Documents Resolution Deadline
                //-   Conditional Sale Deadline

                //- Closing and Possession
                //-   Closing Date
                //-   Possession Date

                //- Alternative Earnest Money Deadline
                //- Record Title Deadline

            //- #tabNotes.tab-pane.fade
            //-   .row
            //-     .col-sm-12
            //-       table.table.table-striped
            //-         thead
            //-           tr
            //-             th.lb-sm Notes
            //-             th.lb-sm Added
            //-             th.lb-sm Action
            //-         tbody
            //-           tr
            //-             td (todo) Need to talk to them about painting the bedroom another color. It is not that attractive.
            //-             td 10/17/2017
            //-             td 
            //-               a(href='#') Edit
            //-           tr
            //-             td (done) Garage door needs to be replaced too. Buyer just backed into it. What an idiot!
            //-             td 10/23/2017
            //-             td 
            //-               a(href='#') Edit

        .row
          .col-sm-12.text-center
            br
            h4
              span.label.label-danger Contract terminated on 11/02/2018

  .col-md-1
  .col-md-7
    .row
      .board
        .board-inner
          ul#tabgroup2.nav.nav-tabs
            .liner
            li.active
              a(href='#doctab0', data-toggle='tab', title='doctab0')
                span.round-tabs.zero
                  | Calendar 
            li
              a(href='#doctab2', data-toggle='tab', title='doctab2')
                span.round-tabs.two
                  | Pending 
                  //- span.label.label-primary 25%
            li
              a(href='#doctab3', data-toggle='tab', title='doctab3')
                span.round-tabs.three
                  | Title Company 
                  //- span.label.label-primary 65%
            li
              a(href='#doctab4', data-toggle='tab', title='doctab4')
                span.round-tabs.four
                  | Misc. 
                  //- span.label.label-default

        .tab-content

          #doctab0.tab-pane.fade.active.in
            p
            #calendar.calendar
          //- NOTE - use table like used with clients listing 
          #doctab2.tab-pane.fade
            table.table.table-striped
              thead
                tr
                  th.lb-sm Documents
                  th.lb-sm Uploaded On
                  th.lb-sm Attachments
                  th.lb-sm Action
              tbody
                tr
                  td Sales Contract
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Counter-Proposal
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Closing Instructions
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')
                  td 
                    a(href='#') Upload
                tr
                  td Earnest Money Receipted
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Square Footage Disclosure (*)
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Sellers Property Disclosure (*)
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')
                  td 
                    a(href='#') Upload
                tr
                  td Lead Based Paint (Obligations) (pre 1978)
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')
                  td 
                    a(href='#') Upload
                tr
                  td Source of Water Addendum (unless on SPD)
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')                     
                  td 
                    a(href='#') Upload
                tr
                  td Inspection Objection
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')                     
                  td 
                    a(href='#') Upload
                tr
                  td Inspection Resolution
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Title Commitment
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Notice of Termination
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Earnest Money Release
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Other Documents
                  td 
                  td 
                  td 
                    a(href='#') Upload
            button.btn.btn-danger.btn-cons(type='button') Terminate Current Contract

          #doctab3.tab-pane.fade
            table.table.table-striped
              thead
                tr
                  th.lb-sm Documents
                  th.lb-sm Uploaded On
                  th.lb-sm Attachments
                  th.lb-sm Action
              tbody
                tr
                  td Buyer's Settlement Statement
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')
                  td 
                    a(href='#') Upload
                tr
                  td Buyer's Settlement Statement
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')
                  td 
                    a(href='#') Upload
                tr
                  td Closing Instructions
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Power of Attorney
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Deed (General/Special/P.R.) (*)
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Four Column Summary
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')
                  td 
                    a(href='#') Upload
                tr
                  td Tax Certificate
                  td 10/15/2017
                  td 
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')                     
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')                     
                    img(src='https://www.santacruzpl.org/media/img/site/icons/sm_pdf.png')                     
                  td 
                    a(href='#') Upload
                tr
                  td Water/Sewer/HOA Aggreement & Proration
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Bill of Sale
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Real Property Transfer Declaration
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Pay-Off Information
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Final Affidavit and Agreement
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Affirmation of Colorado Residency
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Commission Disbursement
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td 1099
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Other Documents
                  td 
                  td 
                  td 
                    a(href='#') Upload

          #doctab4.tab-pane.fade
            table.table.table-striped
              thead
                tr
                  th.lb-sm Documents
                  th.lb-sm Uploaded On
                  th.lb-sm Attachments
                  th.lb-sm Action
              tbody
                tr
                  td Listing Fact Sheet
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Mesa County Assessor
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Mill Tailings
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Receipted Doc's & Disclosures
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td FHA Amendatory Clause
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Occupancy Rental Agreement
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Referral Form
                  td 
                  td 
                  td 
                    a(href='#') Upload
                tr
                  td Other Documents
                  td 
                  td 
                  td 
                    a(href='#') Upload
